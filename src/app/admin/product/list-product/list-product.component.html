<div class="container product-page">

  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
    <h2 class="page-title mb-0">Quản lý sản phẩm</h2>

    <div class="d-flex align-items-center gap-2">
      <form [formGroup]="search" (ngSubmit)="searchP()">
        <div class="search-input-wrapper">
          <input id="sc" type="text" class="form-control search-input" formControlName="nameSearch" placeholder="Nhập tên hoặc hãng">
          <button type="submit" class="search-icon-btn"><i class="fa fa-search"></i></button>
        </div>
      </form>

      <a class="btn btn-primary" routerLink="/admin/createProduct">
        <i class="fa fa-plus me-1"></i>Thêm sản phẩm
      </a>
    </div>
  </div>

  <div class="card">
    <div class="table-responsive-custom">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>Mã</th>
            <th>Tên sản phẩm</th>
            <th>Hãng</th>
            <th>Giá</th>
            <th>Khuyến mãi</th>
            <th>Ngày tạo</th>
            <th width="140">Hành động</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of productList">
            <td>{{ p.idProduct }}</td>
            <td class="fw-semibold">{{ p.productName }}</td>
            <td>{{ p.productType?.nameType ?? 'Chưa phân loại' }}</td>
            <td class="text-danger fw-semibold">{{ numToString(p.price) }}<sup>đ</sup></td>
            <td>{{ p.promotion?.namePromotion ?? 'Không có' }}</td>
            <td>{{ p.enteredDate }}</td>
            <td class="text-nowrap">
              <button class="btn btn-sm btn-outline-info me-1" (click)="view(p.idProduct)"><i class="fa fa-info-circle"></i></button>
              <a class="btn btn-sm btn-outline-warning me-1" [routerLink]="['/admin/editProduct', p.idProduct]"><i class="fa fa-wrench"></i></a>
              <button class="btn btn-sm btn-outline-danger" (click)="delete(p.idProduct, p.productName)"><i class="fa fa-trash"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <nav *ngIf="totalPagination>1" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item" *ngFor="let _ of [].constructor(totalPagination); let i=index" [hidden]="i<indexPagination-4||i>indexPagination+2" [class.active]="indexPagination===i+1">
        <a class="page-link" (click)="getPage(i)">{{ i+1 }}</a>
      </li>
    </ul>
  </nav>

</div>
